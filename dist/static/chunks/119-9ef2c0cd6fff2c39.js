(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[119],{1163:function(a,b,c){a.exports=c(9898)},1383:function(a,b,c){"use strict";function d(a,b){return b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}c.d(b,{Z:function(){return d}})},9367:function(a,b,c){"use strict";c.d(b,{ZP:function(){return aD}});var d,e,f={};c.r(f),c.d(f,{Decoder:function(){return av},Encoder:function(){return au},PacketType:function(){return e},protocol:function(){return at}});let g=Object.create(null);g.open="0",g.close="1",g.ping="2",g.pong="3",g.message="4",g.upgrade="5",g.noop="6";let h=Object.create(null);Object.keys(g).forEach(a=>{h[g[a]]=a});let i={type:"error",data:"parser error"},j="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),k="function"==typeof ArrayBuffer,l=a=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,m=({type:a,data:b},c,d)=>j&&b instanceof Blob?c?d(b):n(b,d):k&&(b instanceof ArrayBuffer||l(b))?c?d(b):n(new Blob([b]),d):d(g[a]+(b||"")),n=(a,b)=>{let c=new FileReader;return c.onload=function(){let a=c.result.split(",")[1];b("b"+a)},c.readAsDataURL(a)};var o=m;let p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let r=0;r<p.length;r++)q[p.charCodeAt(r)]=r;let s=a=>{let b=.75*a.length,c=a.length,d,e=0,f,g,h,i;"="===a[a.length-1]&&(b--,"="===a[a.length-2]&&b--);let j=new ArrayBuffer(b),k=new Uint8Array(j);for(d=0;d<c;d+=4)f=q[a.charCodeAt(d)],g=q[a.charCodeAt(d+1)],h=q[a.charCodeAt(d+2)],i=q[a.charCodeAt(d+3)],k[e++]=f<<2|g>>4,k[e++]=(15&g)<<4|h>>2,k[e++]=(3&h)<<6|63&i;return j},t="function"==typeof ArrayBuffer,u=(a,b)=>{if("string"!=typeof a)return{type:"message",data:w(a,b)};let c=a.charAt(0);if("b"===c)return{type:"message",data:v(a.substring(1),b)};let d=h[c];return d?a.length>1?{type:h[c],data:a.substring(1)}:{type:h[c]}:i},v=(a,b)=>{if(!t)return{base64:!0,data:a};{let c=s(a);return w(c,b)}},w=(a,b)=>"blob"===b?a instanceof ArrayBuffer?new Blob([a]):a:a;var x=u;let y=(a,b)=>{let c=a.length,d=Array(c),e=0;a.forEach((a,f)=>{o(a,!1,a=>{d[f]=a,++e===c&&b(d.join("\x1e"))})})},z=(a,b)=>{let c=a.split("\x1e"),d=[];for(let e=0;e<c.length;e++){let f=x(c[e],b);if(d.push(f),"error"===f.type)break}return d};function A(a){if(a)return B(a)}function B(a){for(var b in A.prototype)a[b]=A.prototype[b];return a}A.prototype.on=A.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},A.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},A.prototype.off=A.prototype.removeListener=A.prototype.removeAllListeners=A.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c,d=this._callbacks["$"+a];if(!d)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var e=0;e<d.length;e++)if((c=d[e])===b||c.fn===b){d.splice(e,1);break}return 0===d.length&&delete this._callbacks["$"+a],this},A.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var b=Array(arguments.length-1),c=this._callbacks["$"+a],d=1;d<arguments.length;d++)b[d-1]=arguments[d];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},A.prototype.emitReserved=A.prototype.emit,A.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},A.prototype.hasListeners=function(a){return!!this.listeners(a).length};let C="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function D(a,...b){return b.reduce((b,c)=>(a.hasOwnProperty(c)&&(b[c]=a[c]),b),{})}let E=setTimeout,F=clearTimeout;function G(a,b){b.useNativeTimers?(a.setTimeoutFn=E.bind(C),a.clearTimeoutFn=F.bind(C)):(a.setTimeoutFn=setTimeout.bind(C),a.clearTimeoutFn=clearTimeout.bind(C))}function H(a){return"string"==typeof a?I(a):Math.ceil(1.33*(a.byteLength||a.size))}function I(a){let b=0,c=0;for(let d=0,e=a.length;d<e;d++)(b=a.charCodeAt(d))<128?c+=1:b<2048?c+=2:b<55296||b>=57344?c+=3:(d++,c+=4);return c}class J extends Error{constructor(a,b,c){super(a),this.description=b,this.context=c,this.type="TransportError"}}class K extends A{constructor(a){super(),this.writable=!1,G(this,a),this.opts=a,this.query=a.query,this.readyState="",this.socket=a.socket}onError(a,b,c){return super.emitReserved("error",new J(a,b,c)),this}open(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(a){"open"===this.readyState&&this.write(a)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(a){let b=x(a,this.socket.binaryType);this.onPacket(b)}onPacket(a){super.emitReserved("packet",a)}onClose(a){this.readyState="closed",super.emitReserved("close",a)}}let L="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),M={},N=0,O=0,P;function Q(a){let b="";do b=L[a%64]+b,a=Math.floor(a/64);while(a>0);return b}function R(){let a=Q(+new Date);return a!==P?(N=0,P=a):a+"."+Q(N++)}for(;O<64;O++)M[L[O]]=O;function S(a){let b="";for(let c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b}let T=!1;try{T="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(U){}let V=T;function W(a){let b=a.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!b||V))return new XMLHttpRequest}catch(c){}if(!b)try{return new C[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(d){}}function X(){}let Y=function(){let a=new W({xdomain:!1});return null!=a.responseType}();class Z extends A{constructor(a,b){super(),G(this,b),this.opts=b,this.method=b.method||"GET",this.uri=a,this.async=!1!==b.async,this.data=void 0!==b.data?b.data:null,this.create()}create(){let a=D(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");a.xdomain=!!this.opts.xd,a.xscheme=!!this.opts.xs;let b=this.xhr=new W(a);try{b.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(let c in b.setDisableHeaderCheck&&b.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(c)&&b.setRequestHeader(c,this.opts.extraHeaders[c])}catch(d){}if("POST"===this.method)try{b.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{b.setRequestHeader("Accept","*/*")}catch(f){}"withCredentials"in b&&(b.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(b.timeout=this.opts.requestTimeout),b.onreadystatechange=()=>{4===b.readyState&&(200===b.status||1223===b.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof b.status?b.status:0)},0))},b.send(this.data)}catch(g){this.setTimeoutFn(()=>{this.onError(g)},0);return}"undefined"!=typeof document&&(this.index=Z.requestsCount++,Z.requests[this.index]=this)}onError(a){this.emitReserved("error",a,this.xhr),this.cleanup(!0)}cleanup(a){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=X,a)try{this.xhr.abort()}catch(b){}"undefined"!=typeof document&&delete Z.requests[this.index],this.xhr=null}}onLoad(){let a=this.xhr.responseText;null!==a&&(this.emitReserved("data",a),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(Z.requestsCount=0,Z.requests={},"undefined"!=typeof document){if("function"==typeof attachEvent)attachEvent("onunload",_);else if("function"==typeof addEventListener){let $="onpagehide"in C?"pagehide":"unload";addEventListener($,_,!1)}}function _(){for(let a in Z.requests)Z.requests.hasOwnProperty(a)&&Z.requests[a].abort()}let aa=(()=>{let a="function"==typeof Promise&&"function"==typeof Promise.resolve;return a?a=>Promise.resolve().then(a):(a,b)=>b(a,0)})(),ab=C.WebSocket||C.MozWebSocket;c(1876).Buffer;let ac="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),ad={websocket:class extends K{constructor(a){super(a),this.supportsBinary=!a.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let a=this.uri(),b=this.opts.protocols,c=ac?{}:D(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(c.headers=this.opts.extraHeaders);try{this.ws=ac?new ab(a,b,c):b?new ab(a,b):new ab(a)}catch(d){return this.emitReserved("error",d)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=a=>this.onClose({description:"websocket connection closed",context:a}),this.ws.onmessage=a=>this.onData(a.data),this.ws.onerror=a=>this.onError("websocket error",a)}write(a){this.writable=!1;for(let b=0;b<a.length;b++){let c=a[b],d=b===a.length-1;o(c,this.supportsBinary,a=>{try{this.ws.send(a)}catch(b){}d&&aa(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let a=this.query||{},b=this.opts.secure?"wss":"ws",c="";this.opts.port&&("wss"===b&&443!==Number(this.opts.port)||"ws"===b&&80!==Number(this.opts.port))&&(c=":"+this.opts.port),this.opts.timestampRequests&&(a[this.opts.timestampParam]=R()),this.supportsBinary||(a.b64=1);let d=S(a),e=-1!==this.opts.hostname.indexOf(":");return b+"://"+(e?"["+this.opts.hostname+"]":this.opts.hostname)+c+this.opts.path+(d.length?"?"+d:"")}check(){return!!ab}},polling:class extends K{constructor(a){if(super(a),this.polling=!1,"undefined"!=typeof location){let b="https:"===location.protocol,c=location.port;c||(c=b?"443":"80"),this.xd="undefined"!=typeof location&&a.hostname!==location.hostname||c!==a.port,this.xs=a.secure!==b}let d=a&&a.forceBase64;this.supportsBinary=Y&&!d}get name(){return"polling"}doOpen(){this.poll()}pause(a){this.readyState="pausing";let b=()=>{this.readyState="paused",a()};if(this.polling||!this.writable){let c=0;this.polling&&(c++,this.once("pollComplete",function(){--c||b()})),this.writable||(c++,this.once("drain",function(){--c||b()}))}else b()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(a){let b=a=>{if("opening"===this.readyState&&"open"===a.type&&this.onOpen(),"close"===a.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};z(a,this.socket.binaryType).forEach(b),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){let a=()=>{this.write([{type:"close"}])};"open"===this.readyState?a():this.once("open",a)}write(a){this.writable=!1,y(a,a=>{this.doWrite(a,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let a=this.query||{},b=this.opts.secure?"https":"http",c="";!1!==this.opts.timestampRequests&&(a[this.opts.timestampParam]=R()),this.supportsBinary||a.sid||(a.b64=1),this.opts.port&&("https"===b&&443!==Number(this.opts.port)||"http"===b&&80!==Number(this.opts.port))&&(c=":"+this.opts.port);let d=S(a),e=-1!==this.opts.hostname.indexOf(":");return b+"://"+(e?"["+this.opts.hostname+"]":this.opts.hostname)+c+this.opts.path+(d.length?"?"+d:"")}request(a={}){return Object.assign(a,{xd:this.xd,xs:this.xs},this.opts),new Z(this.uri(),a)}doWrite(a,b){let c=this.request({method:"POST",data:a});c.on("success",b),c.on("error",(a,b)=>{this.onError("xhr post error",a,b)})}doPoll(){let a=this.request();a.on("data",this.onData.bind(this)),a.on("error",(a,b)=>{this.onError("xhr poll error",a,b)}),this.pollXhr=a}}},ae=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,af=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ag(a){let b=a,c=a.indexOf("["),d=a.indexOf("]");-1!=c&& -1!=d&&(a=a.substring(0,c)+a.substring(c,d).replace(/:/g,";")+a.substring(d,a.length));let e=ae.exec(a||""),f={},g=14;for(;g--;)f[af[g]]=e[g]||"";return -1!=c&& -1!=d&&(f.source=b,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=ah(f,f.path),f.queryKey=ai(f,f.query),f}function ah(a,b){let c=b.replace(/\/{2,9}/g,"/").split("/");return("/"==b.substr(0,1)||0===b.length)&&c.splice(0,1),"/"==b.substr(b.length-1,1)&&c.splice(c.length-1,1),c}function ai(a,b){let c={};return b.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,d){b&&(c[b]=d)}),c}class aj extends A{constructor(a,b={}){super(),a&&"object"==typeof a&&(b=a,a=null),a?(a=ag(a),b.hostname=a.host,b.secure="https"===a.protocol||"wss"===a.protocol,b.port=a.port,a.query&&(b.query=a.query)):b.host&&(b.hostname=ag(b.host).host),G(this,b),this.secure=null!=b.secure?b.secure:"undefined"!=typeof location&&"https:"===location.protocol,b.hostname&&!b.port&&(b.port=this.secure?"443":"80"),this.hostname=b.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=b.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},b),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function(a){let b={},c=a.split("&");for(let d=0,e=c.length;d<e;d++){let f=c[d].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return b}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(a){let b=Object.assign({},this.opts.query);b.EIO=4,b.transport=a,this.id&&(b.sid=this.id);let c=Object.assign({},this.opts.transportOptions[a],this.opts,{query:b,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new ad[a](c)}open(){let a;if(this.opts.rememberUpgrade&&aj.priorWebsocketSuccess&& -1!==this.transports.indexOf("websocket"))a="websocket";else if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else a=this.transports[0];this.readyState="opening";try{a=this.createTransport(a)}catch(b){this.transports.shift(),this.open();return}a.open(),this.setTransport(a)}setTransport(a){this.transport&&this.transport.removeAllListeners(),this.transport=a,a.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",a=>this.onClose("transport close",a))}probe(a){let b=this.createTransport(a),c=!1;aj.priorWebsocketSuccess=!1;let d=()=>{c||(b.send([{type:"ping",data:"probe"}]),b.once("packet",a=>{if(!c){if("pong"===a.type&&"probe"===a.data)this.upgrading=!0,this.emitReserved("upgrading",b),b&&(aj.priorWebsocketSuccess="websocket"===b.name,this.transport.pause(()=>{!c&&"closed"!==this.readyState&&(j(),this.setTransport(b),b.send([{type:"upgrade"}]),this.emitReserved("upgrade",b),b=null,this.upgrading=!1,this.flush())}));else{let d=Error("probe error");d.transport=b.name,this.emitReserved("upgradeError",d)}}}))};function e(){c||(c=!0,j(),b.close(),b=null)}let f=a=>{let c=Error("probe error: "+a);c.transport=b.name,e(),this.emitReserved("upgradeError",c)};function g(){f("transport closed")}function h(){f("socket closed")}function i(a){b&&a.name!==b.name&&e()}let j=()=>{b.removeListener("open",d),b.removeListener("error",f),b.removeListener("close",g),this.off("close",h),this.off("upgrading",i)};b.once("open",d),b.once("error",f),b.once("close",g),this.once("close",h),this.once("upgrading",i),b.open()}onOpen(){if(this.readyState="open",aj.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let a=0,b=this.upgrades.length;for(;a<b;a++)this.probe(this.upgrades[a])}}onPacket(a){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",a),this.emitReserved("heartbeat"),a.type){case"open":this.onHandshake(JSON.parse(a.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let b=Error("server error");b.code=a.data,this.onError(b);break;case"message":this.emitReserved("data",a.data),this.emitReserved("message",a.data)}}onHandshake(a){this.emitReserved("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.maxPayload=a.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let a=this.getWritablePackets();this.transport.send(a),this.prevBufferLen=a.length,this.emitReserved("flush")}}getWritablePackets(){let a=this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1;if(!a)return this.writeBuffer;let b=1;for(let c=0;c<this.writeBuffer.length;c++){let d=this.writeBuffer[c].data;if(d&&(b+=H(d)),c>0&&b>this.maxPayload)return this.writeBuffer.slice(0,c);b+=2}return this.writeBuffer}write(a,b,c){return this.sendPacket("message",a,b,c),this}send(a,b,c){return this.sendPacket("message",a,b,c),this}sendPacket(a,b,c,d){if("function"==typeof b&&(d=b,b=void 0),"function"==typeof c&&(d=c,c=null),"closing"===this.readyState||"closed"===this.readyState)return;(c=c||{}).compress=!1!==c.compress;let e={type:a,data:b,options:c};this.emitReserved("packetCreate",e),this.writeBuffer.push(e),d&&this.once("flush",d),this.flush()}close(){let a=()=>{this.onClose("forced close"),this.transport.close()},b=()=>{this.off("upgrade",b),this.off("upgradeError",b),a()},c=()=>{this.once("upgrade",b),this.once("upgradeError",b)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?c():a()}):this.upgrading?c():a()),this}onError(a){aj.priorWebsocketSuccess=!1,this.emitReserved("error",a),this.onClose("transport error",a)}onClose(a,b){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",a,b),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(a){let b=[],c=0,d=a.length;for(;c<d;c++)~this.transports.indexOf(a[c])&&b.push(a[c]);return b}}aj.protocol=4,aj.protocol;let ak="function"==typeof ArrayBuffer,al=a=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,am=Object.prototype.toString,an="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===am.call(Blob),ao="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===am.call(File);function ap(a){return ak&&(a instanceof ArrayBuffer||al(a))||an&&a instanceof Blob||ao&&a instanceof File}function aq(a,b){if(!a||"object"!=typeof a)return!1;if(Array.isArray(a)){for(let c=0,d=a.length;c<d;c++)if(aq(a[c]))return!0;return!1}if(ap(a))return!0;if(a.toJSON&&"function"==typeof a.toJSON&&1===arguments.length)return aq(a.toJSON(),!0);for(let e in a)if(Object.prototype.hasOwnProperty.call(a,e)&&aq(a[e]))return!0;return!1}function ar(a,b){if(!a)return a;if(ap(a)){let c={_placeholder:!0,num:b.length};return b.push(a),c}if(Array.isArray(a)){let d=Array(a.length);for(let e=0;e<a.length;e++)d[e]=ar(a[e],b);return d}if("object"==typeof a&&!(a instanceof Date)){let f={};for(let g in a)Object.prototype.hasOwnProperty.call(a,g)&&(f[g]=ar(a[g],b));return f}return a}function as(a,b){if(!a)return a;if(a&& !0===a._placeholder){let c="number"==typeof a.num&&a.num>=0&&a.num<b.length;if(c)return b[a.num];throw Error("illegal attachments")}if(Array.isArray(a))for(let d=0;d<a.length;d++)a[d]=as(a[d],b);else if("object"==typeof a)for(let e in a)Object.prototype.hasOwnProperty.call(a,e)&&(a[e]=as(a[e],b));return a}let at=5;(d=e||(e={}))[d.CONNECT=0]="CONNECT",d[d.DISCONNECT=1]="DISCONNECT",d[d.EVENT=2]="EVENT",d[d.ACK=3]="ACK",d[d.CONNECT_ERROR=4]="CONNECT_ERROR",d[d.BINARY_EVENT=5]="BINARY_EVENT",d[d.BINARY_ACK=6]="BINARY_ACK";class au{constructor(a){this.replacer=a}encode(a){return(a.type===e.EVENT||a.type===e.ACK)&&aq(a)?(a.type=a.type===e.EVENT?e.BINARY_EVENT:e.BINARY_ACK,this.encodeAsBinary(a)):[this.encodeAsString(a)]}encodeAsString(a){let b=""+a.type;return(a.type===e.BINARY_EVENT||a.type===e.BINARY_ACK)&&(b+=a.attachments+"-"),a.nsp&&"/"!==a.nsp&&(b+=a.nsp+","),null!=a.id&&(b+=a.id),null!=a.data&&(b+=JSON.stringify(a.data,this.replacer)),b}encodeAsBinary(a){let b=function(a){let b=[],c=a.data,d=a;return d.data=ar(c,b),d.attachments=b.length,{packet:d,buffers:b}}(a),c=this.encodeAsString(b.packet),d=b.buffers;return d.unshift(c),d}}class av extends A{constructor(a){super(),this.reviver=a}add(a){let b;if("string"==typeof a){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");(b=this.decodeString(a)).type===e.BINARY_EVENT||b.type===e.BINARY_ACK?(this.reconstructor=new aw(b),0===b.attachments&&super.emitReserved("decoded",b)):super.emitReserved("decoded",b)}else if(ap(a)||a.base64){if(this.reconstructor)(b=this.reconstructor.takeBinaryData(a))&&(this.reconstructor=null,super.emitReserved("decoded",b));else throw Error("got binary data when not reconstructing a packet")}else throw Error("Unknown type: "+a)}decodeString(a){let b=0,c={type:Number(a.charAt(0))};if(void 0===e[c.type])throw Error("unknown packet type "+c.type);if(c.type===e.BINARY_EVENT||c.type===e.BINARY_ACK){let d=b+1;for(;"-"!==a.charAt(++b)&&b!=a.length;);let f=a.substring(d,b);if(f!=Number(f)||"-"!==a.charAt(b))throw Error("Illegal attachments");c.attachments=Number(f)}if("/"===a.charAt(b+1)){let g=b+1;for(;++b;){let h=a.charAt(b);if(","===h||b===a.length)break}c.nsp=a.substring(g,b)}else c.nsp="/";let i=a.charAt(b+1);if(""!==i&&Number(i)==i){let j=b+1;for(;++b;){let k=a.charAt(b);if(null==k||Number(k)!=k){--b;break}if(b===a.length)break}c.id=Number(a.substring(j,b+1))}if(a.charAt(++b)){let l=this.tryParse(a.substr(b));if(av.isPayloadValid(c.type,l))c.data=l;else throw Error("invalid payload")}return c}tryParse(a){try{return JSON.parse(a,this.reviver)}catch(b){return!1}}static isPayloadValid(a,b){switch(a){case e.CONNECT:return"object"==typeof b;case e.DISCONNECT:return void 0===b;case e.CONNECT_ERROR:return"string"==typeof b||"object"==typeof b;case e.EVENT:case e.BINARY_EVENT:return Array.isArray(b)&&b.length>0;case e.ACK:case e.BINARY_ACK:return Array.isArray(b)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class aw{constructor(a){this.packet=a,this.buffers=[],this.reconPack=a}takeBinaryData(a){if(this.buffers.push(a),this.buffers.length===this.reconPack.attachments){var b,c;let d=(b=this.reconPack,c=this.buffers,b.data=as(b.data,c),b.attachments=void 0,b);return this.finishedReconstruction(),d}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ax(a,b,c){return a.on(b,c),function(){a.off(b,c)}}let ay=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class az extends A{constructor(a,b,c){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=a,this.nsp=b,c&&c.auth&&(this.auth=c.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let a=this.io;this.subs=[ax(a,"open",this.onopen.bind(this)),ax(a,"packet",this.onpacket.bind(this)),ax(a,"error",this.onerror.bind(this)),ax(a,"close",this.onclose.bind(this)),]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io["_reconnecting"]||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...a){return a.unshift("message"),this.emit.apply(this,a),this}emit(a,...b){if(ay.hasOwnProperty(a))throw Error('"'+a+'" is a reserved event name');b.unshift(a);let c={type:e.EVENT,data:b};if(c.options={},c.options.compress=!1!==this.flags.compress,"function"==typeof b[b.length-1]){let d=this.ids++,f=b.pop();this._registerAckCallback(d,f),c.id=d}let g=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,h=this.flags.volatile&&(!g||!this.connected);return h||(this.connected?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(a,b){let c=this.flags.timeout;if(void 0===c){this.acks[a]=b;return}let d=this.io.setTimeoutFn(()=>{delete this.acks[a];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===a&&this.sendBuffer.splice(c,1);b.call(this,Error("operation has timed out"))},c);this.acks[a]=(...a)=>{this.io.clearTimeoutFn(d),b.apply(this,[null,...a])}}packet(a){a.nsp=this.nsp,this.io._packet(a)}onopen(){"function"==typeof this.auth?this.auth(a=>{this.packet({type:e.CONNECT,data:a})}):this.packet({type:e.CONNECT,data:this.auth})}onerror(a){this.connected||this.emitReserved("connect_error",a)}onclose(a,b){this.connected=!1,delete this.id,this.emitReserved("disconnect",a,b)}onpacket(a){let b=a.nsp===this.nsp;if(b)switch(a.type){case e.CONNECT:if(a.data&&a.data.sid){let c=a.data.sid;this.onconnect(c)}else this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case e.EVENT:case e.BINARY_EVENT:this.onevent(a);break;case e.ACK:case e.BINARY_ACK:this.onack(a);break;case e.DISCONNECT:this.ondisconnect();break;case e.CONNECT_ERROR:this.destroy();let d=Error(a.data.message);d.data=a.data.data,this.emitReserved("connect_error",d)}}onevent(a){let b=a.data||[];null!=a.id&&b.push(this.ack(a.id)),this.connected?this.emitEvent(b):this.receiveBuffer.push(Object.freeze(b))}emitEvent(a){if(this._anyListeners&&this._anyListeners.length){let b=this._anyListeners.slice();for(let c of b)c.apply(this,a)}super.emit.apply(this,a)}ack(a){let b=this,c=!1;return function(...d){c||(c=!0,b.packet({type:e.ACK,id:a,data:d}))}}onack(a){let b=this.acks[a.id];"function"==typeof b&&(b.apply(this,a.data),delete this.acks[a.id])}onconnect(a){this.id=a,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(a=>this.emitEvent(a)),this.receiveBuffer=[],this.sendBuffer.forEach(a=>{this.notifyOutgoingListeners(a),this.packet(a)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(a=>a()),this.subs=void 0),this.io["_destroy"](this)}disconnect(){return this.connected&&this.packet({type:e.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(a){return this.flags.compress=a,this}get volatile(){return this.flags.volatile=!0,this}timeout(a){return this.flags.timeout=a,this}onAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(a),this}prependAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(a),this}offAny(a){if(!this._anyListeners)return this;if(a){let b=this._anyListeners;for(let c=0;c<b.length;c++)if(a===b[c]){b.splice(c,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(a),this}prependAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(a),this}offAnyOutgoing(a){if(!this._anyOutgoingListeners)return this;if(a){let b=this._anyOutgoingListeners;for(let c=0;c<b.length;c++)if(a===b[c]){b.splice(c,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(a){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let b=this._anyOutgoingListeners.slice();for(let c of b)c.apply(this,a.data)}}}function aA(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}aA.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),c=Math.floor(b*this.jitter*a);a=(1&Math.floor(10*b))==0?a-c:a+c}return 0|Math.min(a,this.max)},aA.prototype.reset=function(){this.attempts=0},aA.prototype.setMin=function(a){this.ms=a},aA.prototype.setMax=function(a){this.max=a},aA.prototype.setJitter=function(a){this.jitter=a};class aB extends A{constructor(a,b){var c;super(),this.nsps={},this.subs=[],a&&"object"==typeof a&&(b=a,a=void 0),(b=b||{}).path=b.path||"/socket.io",this.opts=b,G(this,b),this.reconnection(!1!==b.reconnection),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(c=b.randomizationFactor)&& void 0!==c?c:.5),this.backoff=new aA({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==b.timeout?2e4:b.timeout),this._readyState="closed",this.uri=a;let d=b.parser||f;this.encoder=new d.Encoder,this.decoder=new d.Decoder,this._autoConnect=!1!==b.autoConnect,this._autoConnect&&this.open()}reconnection(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection}reconnectionAttempts(a){return void 0===a?this._reconnectionAttempts:(this._reconnectionAttempts=a,this)}reconnectionDelay(a){var b;return void 0===a?this._reconnectionDelay:(this._reconnectionDelay=a,null===(b=this.backoff)|| void 0===b||b.setMin(a),this)}randomizationFactor(a){var b;return void 0===a?this._randomizationFactor:(this._randomizationFactor=a,null===(b=this.backoff)|| void 0===b||b.setJitter(a),this)}reconnectionDelayMax(a){var b;return void 0===a?this._reconnectionDelayMax:(this._reconnectionDelayMax=a,null===(b=this.backoff)|| void 0===b||b.setMax(a),this)}timeout(a){return arguments.length?(this._timeout=a,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(a){if(~this._readyState.indexOf("open"))return this;this.engine=new aj(this.uri,this.opts);let b=this.engine,c=this;this._readyState="opening",this.skipReconnect=!1;let d=ax(b,"open",function(){c.onopen(),a&&a()}),e=ax(b,"error",b=>{c.cleanup(),c._readyState="closed",this.emitReserved("error",b),a?a(b):c.maybeReconnectOnOpen()});if(!1!==this._timeout){let f=this._timeout;0===f&&d();let g=this.setTimeoutFn(()=>{d(),b.close(),b.emit("error",Error("timeout"))},f);this.opts.autoUnref&&g.unref(),this.subs.push(function(){clearTimeout(g)})}return this.subs.push(d),this.subs.push(e),this}connect(a){return this.open(a)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let a=this.engine;this.subs.push(ax(a,"ping",this.onping.bind(this)),ax(a,"data",this.ondata.bind(this)),ax(a,"error",this.onerror.bind(this)),ax(a,"close",this.onclose.bind(this)),ax(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(a){this.decoder.add(a)}ondecoded(a){this.emitReserved("packet",a)}onerror(a){this.emitReserved("error",a)}socket(a,b){let c=this.nsps[a];return c||(c=new az(this,a,b),this.nsps[a]=c),c}_destroy(a){let b=Object.keys(this.nsps);for(let c of b){let d=this.nsps[c];if(d.active)return}this._close()}_packet(a){let b=this.encoder.encode(a);for(let c=0;c<b.length;c++)this.engine.write(b[c],a.options)}cleanup(){this.subs.forEach(a=>a()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(a,b){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",a,b),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let a=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let b=this.backoff.duration();this._reconnecting=!0;let c=this.setTimeoutFn(()=>{!a.skipReconnect&&(this.emitReserved("reconnect_attempt",a.backoff.attempts),a.skipReconnect||a.open(b=>{b?(a._reconnecting=!1,a.reconnect(),this.emitReserved("reconnect_error",b)):a.onreconnect()}))},b);this.opts.autoUnref&&c.unref(),this.subs.push(function(){clearTimeout(c)})}}onreconnect(){let a=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",a)}}let aC={};function aD(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};let c=function(a,b="",c){let d=a;c=c||"undefined"!=typeof location&&location,null==a&&(a=c.protocol+"//"+c.host),"string"==typeof a&&("/"===a.charAt(0)&&(a="/"===a.charAt(1)?c.protocol+a:c.host+a),/^(https?|wss?):\/\//.test(a)||(a=void 0!==c?c.protocol+"//"+a:"https://"+a),d=ag(a)),!d.port&&(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/";let e=-1!==d.host.indexOf(":"),f=e?"["+d.host+"]":d.host;return d.id=d.protocol+"://"+f+":"+d.port+b,d.href=d.protocol+"://"+f+(c&&c.port===d.port?"":":"+d.port),d}(a,b.path||"/socket.io"),d=c.source,e=c.id,f=c.path,g=aC[e]&&f in aC[e].nsps,h=b.forceNew||b["force new connection"]|| !1===b.multiplex||g,i;return h?i=new aB(d,b):(aC[e]||(aC[e]=new aB(d,b)),i=aC[e]),c.query&&!b.query&&(b.query=c.queryKey),i.socket(c.path,b)}Object.assign(aD,{Manager:aB,Socket:az,io:aD,connect:aD})}}])