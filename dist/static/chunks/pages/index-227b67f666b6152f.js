(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8628:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return N}});var d=c(7294),e=c(186),f=c(7812),g=c(6273),h=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:void 0,b=(0,d.useState)([]),c=b[0],e=b[1],f=(0,d.useState)(),h=f[0],i=f[1];return(0,d.useEffect)(function(){(0,g.N$)(function(a){e(a)},function(a){console.log({err:a}),i(a)})},[a]),{masters:c,setMasters:e,error:h}},i=c(8047),j=e.default.div.withConfig({displayName:"ComponentesEstilados__Cabecera",componentId:"sc-158qheq-0"})(["display:flex;justify-content:center;align-items:center;"]),k=e.default.div.withConfig({displayName:"ComponentesEstilados__Icon",componentId:"sc-158qheq-1"})(["display:flex;justify-content:center;align-items:center;font-size:1.5rem;cursor:pointer;color:black;position:absolute;top:1.5rem;right:1.5rem;@media (max-width:768px){top:0;right:0;}"]),l=e.default.div.withConfig({displayName:"ComponentesEstilados__Contenedor",componentId:"sc-158qheq-2"})(["display:",";justify-content:flex-start;align-items:center;flex-direction:column;background-color:#8a0303;position:fixed;width:100vw;height:",";transition:height 0.5s;gap:1rem;"],function(a){return a.show?"flex":"none"},function(a){return a.height}),m=e.default.button.withConfig({displayName:"ComponentesEstilados__Boton",componentId:"sc-158qheq-3"})(["font-size:1rem;font-family:'Roboto',sans-serif;background-color:#282c34;color:#f00;border-radius:0.5rem;padding:0.5rem 1rem;"]),n=e.default.div.withConfig({displayName:"ComponentesEstilados__Subcontenedor",componentId:"sc-158qheq-4"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;"]),o=e.default.h1.withConfig({displayName:"ComponentesEstilados__Titulo",componentId:"sc-158qheq-5"})(["font-size:2.5rem;font-weight:600;font-family:'Vampire','Roboto',sans-serif;color:black;"]),p=e.default.span.withConfig({displayName:"ComponentesEstilados__Frase",componentId:"sc-158qheq-6"})(["font-size:1.5rem;font-weight:600;font-family:'Vampire','Roboto',sans-serif;color:black;"]),q=e.default.label.withConfig({displayName:"ComponentesEstilados__Label",componentId:"sc-158qheq-7"})(["font-size:1rem;font-weight:600;color:black;"]),r=e.default.input.withConfig({displayName:"ComponentesEstilados__Input",componentId:"sc-158qheq-8"})(["font-size:1rem;background-color:#282c34;color:red;margin:0.2rem 0;accent-color:red;"]),s=e.default.select.withConfig({displayName:"ComponentesEstilados__Select",componentId:"sc-158qheq-9"})(["font-size:1rem;background-color:#282c34;color:red;margin:0.2rem 0;"]),t=c(5893);function u(a){var b=a.show,c=a.onHide,e=h(),s=e.masters,u=e.setMasters;e.errorMasters;var w=(0,d.useState)(),x=w[0],y=w[1],z=(0,d.useState)(""),A=z[0],B=z[1],C=(0,d.useState)(""),D=C[0],E=C[1],F=(0,d.useState)(!1),G=F[0],H=F[1],I=(0,d.useState)(!1),J=I[0],K=I[1],L=(0,d.useState)(),M=L[0],N=L[1],O=(0,d.useState)(),P=O[0],Q=O[1],R=(0,d.useState)(),S=R[0],T=R[1],U=function(a){N(a.target.value)},V=function(a){Q(a.target.value)},W=function(a){T(a.target.value)},X=function(){M&&(0,g.Ok)({nickname:M,nombre:P,email:S,id:x},function(a){x?u(s.map(function(b){return b.id===x?a[0]:b})):u([].concat((0,f.Z)(s),(0,f.Z)(a))),H(!0)},function(a){console.log({error:a})})},Y=function(){x&&(0,g.Ho)({nombre:A,master:x},function(a){E(a[0].id),K(!0)})};(0,d.useEffect)(function(){if(M){var a=s.find(function(a){return a.nickname===M});y(null==a?void 0:a.id),Q(null==a?void 0:a.nombre),T(null==a?void 0:a.email)}},[s,M]);var Z=(0,d.useState)(!1),$=(Z[0],Z[1]),_=function(){$(!0)},aa=(0,d.useState)("0px"),ab=aa[0],ac=aa[1];return(0,d.useEffect)(function(){b?ac("100vh"):ac("0px")},[b]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l,{show:b,height:ab,children:[(0,t.jsxs)(j,{children:[(0,t.jsx)(o,{children:"\xa1Nueva cronica!"}),(0,t.jsx)(k,{children:(0,t.jsx)(i.Z,{onClick:c})})]}),(0,t.jsxs)(n,{children:[(0,t.jsx)(p,{children:"Primero necesito saber quien eres:"}),(0,t.jsx)(r,{list:"nick",placeholder:"\xbfCu\xe1l es tu nick?",value:M||"",onChange:U}),(0,t.jsx)(r,{type:"text",placeholder:"\xbfCu\xe1l es tu nombre?",value:P||"",onChange:V}),(0,t.jsx)(r,{type:"email",placeholder:"\xbfCu\xe1l es tu email?",value:S||"",onChange:W}),(0,t.jsx)(m,{onClick:X,children:"Listo"})]}),G&&(0,t.jsxs)(n,{children:[(0,t.jsx)(p,{children:"\xbfQue cronica quieres crear?"}),(0,t.jsx)(r,{type:"text",placeholder:"\xbfEl nombre de la cronica?",value:A,onChange:function(a){return B(a.target.value)}}),(0,t.jsx)(m,{onClick:Y,children:"Crear Cronica"})]}),J?(0,t.jsxs)(n,{children:[(0,t.jsx)(p,{children:"\xa1Listo!"}),(0,t.jsx)(p,{children:"Guarda este ID:"}),(0,t.jsx)(q,{children:D}),(0,t.jsxs)(q,{children:[(0,t.jsx)(r,{type:"checkbox",id:"copiado",onChange:_}),"\xa1Gu\xe1rdalo por mi!"]}),(0,t.jsx)(v,{href:"/".concat(D),children:"\xa1A jugar!"})]}):(0,t.jsx)(m,{onClick:c,children:"Cerrar"})]}),(0,t.jsx)("datalist",{id:"nick",children:s&&s.map(function(a){return(0,t.jsx)("option",{"data-id":a.id,value:a.nickname,children:a.nombre},a.id)})})]})}var v=e.default.a.withConfig({displayName:"NewCronica__Link",componentId:"sc-1bx027f-0"})(["display:block;width:8em;background:#4E9CAF;text-align:center;color:white;font-weight:bold;line-height:2em;font-size:1rem;font-family:'Roboto',sans-serif;background-color:#282c34;color:#f00;border-radius:0.5rem;padding:0.5rem 1rem;"]),w=c(9473),x=function(a){try{var b=localStorage.getItem(a);return b?JSON.parse(b):void 0}catch(c){console.error(c)}},y=function(a,b){try{localStorage.setItem(a,JSON.stringify(b))}catch(c){console.error(c)}},z=c(7709),A=function(a){var b=a.show,c=a.onHide,e=(0,d.useState)([]),f=e[0],h=e[1];(0,d.useEffect)(function(){(0,g.N$)(function(a){h(a)},function(a){console.log({error:a})})},[]);var u=(0,d.useState)(),v=u[0],w=u[1],x=(0,d.useState)([]),z=x[0],A=x[1];(0,d.useEffect)(function(){A([]),E(""),v&&(0,g.gC)(v,function(a){A(a)},function(a){console.log({error:a})})},[v]);var C=(0,d.useState)(),D=C[0],E=C[1],F=(0,d.useState)(0),G=F[0],H=F[1];(0,d.useEffect)(function(){b?H("100vh"):H("0px")},[b]);var I=function(){y("cronica",z.find(function(a){return a.id===D}))};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(l,{show:b,height:G,children:[(0,t.jsxs)(j,{children:[(0,t.jsx)(k,{onClick:c,children:(0,t.jsx)(i.Z,{})}),(0,t.jsx)(o,{children:"\xbfOlvidaste el ID de tu cronica?"})]}),(0,t.jsxs)(n,{children:[(0,t.jsx)(p,{children:"Necesito saber quien la dirige"}),(0,t.jsxs)(s,{type:"select",value:v,onChange:function(a){return w(a.target.value)},children:[(0,t.jsx)("option",{value:null,children:"Selecciona un master"}),f&&f.map(function(a){return(0,t.jsx)("option",{value:a.id,children:a.nickname},a.id)})]})]}),(0,t.jsxs)(n,{children:[(0,t.jsx)(p,{children:"Las siguientes son las cronicas en curso"}),(0,t.jsxs)(s,{type:"select",value:D,onChange:function(a){return E(a.target.value)},children:[(0,t.jsx)("option",{value:"",children:"Selecciona una cronica"}),z&&z.map(function(a){return(0,t.jsx)("option",{value:a.id,children:a.nombre},a.id)})]})]}),D?(0,t.jsxs)(n,{children:[(0,t.jsx)(p,{children:"El ID de tu cronica es:"}),(0,t.jsx)(q,{children:D}),(0,t.jsxs)(q,{children:[(0,t.jsx)(r,{type:"checkbox",id:"copiado",onChange:I}),"\xa1Gu\xe1rdalo por mi!"]}),(0,t.jsx)(B,{href:"/".concat(D),children:"\xa1A jugar!"})]}):(0,t.jsx)(m,{onClick:c,children:"Cerrar"})]})})},B=e.default.a.withConfig({displayName:"ForgotIdCronica__Link",componentId:"sc-1f6lid3-0"})(["display:block;width:8em;background:#4E9CAF;text-align:center;color:white;font-weight:bold;line-height:2em;font-size:1rem;font-family:'Roboto',sans-serif;background-color:#282c34;color:#f00;border-radius:0.5rem;padding:0.5rem 1rem;"]);function C(){var a=(0,w.v9)(function(a){return a.cronica}),b=(0,w.I0)();(0,d.useEffect)(function(){var a=x("cronica");b((0,z.ZB)(a))},[b]);var c=(0,d.useState)((null==a?void 0:a.id)||""),e=c[0],f=c[1],g=(0,d.useState)(!1),h=g[0],i=g[1],j=function(a){f(a.target.value)},k=function(){i(!1)},l=(0,d.useState)(!1),m=l[0],n=l[1],o=function(){n(!1)};return(0,d.useEffect)(function(){null!=a&&a.id&&f(a.id)},[a]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{show:h,onHide:k}),(0,t.jsx)(A,{show:m,onHide:o}),(0,t.jsxs)(F,{children:[(0,t.jsx)(G,{children:"\xa1Bienvenido!"}),(0,t.jsx)(H,{children:"Esta plataforma pretende ayudar en las partidas de rol online."}),!h&&(0,t.jsxs)(D,{children:[(0,t.jsx)(K,{children:"Si ya tienes creada una cr\xf3nica, puedes entrar a ella mediante el ID que deber\xedas tener guardado."}),(0,t.jsx)(J,{type:"text",placeholder:"ID de la cr\xf3nica",onChange:j,value:e||""}),(0,t.jsx)(L,{href:"/".concat(e),children:"Entra a tu cronica"}),(0,t.jsx)(E,{onClick:function(){return n(!0)},children:"\xbfHas olvidado el ID de tu cr\xf3nica?"})]}),(0,t.jsxs)(D,{children:[(0,t.jsx)(K,{children:"Si no tienes una cr\xf3nica creada, puedes crear una nueva."}),(0,t.jsx)(I,{onClick:function(){return i(!0)},disabled:""===e,children:"Crea una nueva cr\xf3nica"})]})]})]})}var D=e.default.div.withConfig({displayName:"Principal__Subcontenedor",componentId:"sc-k0iieo-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;margin-bottom:2rem;"]),E=e.default.span.withConfig({displayName:"Principal__Forgot",componentId:"sc-k0iieo-1"})(["margin-top:0.5rem;font-size:0.6rem;color:#fff;cursor:pointer;&:hover{text-decoration:underline;}@media (max-width:768px){margin-top:1rem;}"]),F=e.default.div.withConfig({displayName:"Principal__Contenedor",componentId:"sc-k0iieo-2"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;width:100vw;"]),G=e.default.h1.withConfig({displayName:"Principal__Titulo",componentId:"sc-k0iieo-3"})(["font-size:2.5rem;font-weight:600;font-family:'Vampire','Roboto',sans-serif;"]),H=e.default.h2.withConfig({displayName:"Principal__Subtitulo",componentId:"sc-k0iieo-4"})(["font-size:1.5rem;font-weight:600;font-family:'Vampire','Roboto',sans-serif;"]),I=e.default.button.withConfig({displayName:"Principal__Boton",componentId:"sc-k0iieo-5"})(["font-size:1rem;font-family:'Roboto',sans-serif;background-color:#000;color:#fff;border-radius:0.5rem;padding:0.5rem 1rem;width:15rem;"]),J=e.default.input.withConfig({displayName:"Principal__Input",componentId:"sc-k0iieo-6"})(["font-size:1rem;font-family:'Roboto',sans-serif;background-color:#000;color:#fff;border-radius:0.5rem;padding:0.5rem 1rem;width:20rem;"]),K=e.default.span.withConfig({displayName:"Principal__Span",componentId:"sc-k0iieo-7"})(["font-size:1rem;font-family:'Roboto',sans-serif;"]),L=e.default.a.withConfig({displayName:"Principal__Link",componentId:"sc-k0iieo-8"})(["display:block;width:15em;background:#4E9CAF;text-align:center;color:white;font-weight:bold;line-height:2em;font-size:1rem;font-family:'Roboto',sans-serif;background-color:black;color:white;border-radius:0.5rem;padding:0.5rem 1rem;"]),M=c(2429);function N(){return(0,t.jsx)(w.zt,{store:M.N,children:(0,t.jsx)(C,{})})}},6273:function(a,b,c){"use strict";c.d(b,{Ho:function(){return u},"N$":function(){return r},Ok:function(){return t},gC:function(){return s},jo:function(){return v}});var d,e=c(29),f=c(6835),g=c(7794),h=c.n(g),i=c(9669),j=c.n(i),k=c(218),l=function(){var a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxseXJsbHB3cXNjZXVncXpwb2VlIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY1OTk4ODYxMiwiZXhwIjoxOTc1NTY0NjEyfQ.djPCjjYiMJetB0LrQn2dOZ12k794Vqw3jUjFIBNN2p4";return["https://llyrllpwqsceugqzpoee.supabase.co",{headers:{apikey:a,Authorization:"Bearer ".concat(a)}},a]},m=l(),n=(0,f.Z)(m,3),o=n[0],p=(n[1],n[2]),q=(0,k.eI)(o,p),r=function(a,b){var c=l(),d=(0,f.Z)(c,2),e=d[0],g=d[1];return j().get("".concat(e,"/rest/v1/masters?select=id,nombre,nickname,email"),g).then(function(b){a(b.data)}).catch(function(a){b(a)})},s=function(a,b,c){var d=l(),e=(0,f.Z)(d,2),g=e[0],h=e[1],i="".concat(g,"/rest/v1/cronicas?select=*,master(*)");return a&&(i="".concat(i,"&master=eq.").concat(a)),j().get("".concat(i),h).then(function(a){b(a.data)}).catch(function(a){c(a)})},t=function(a,b,c){var d=l(),e=(0,f.Z)(d,2),g=e[0],h=e[1];return h.headers.Prefer="resolution=merge-duplicates,return=representation",j().post("".concat(g,"/rest/v1/masters?select=id,nombre,nickname,email"),a,h).then(function(a){b(a.data)}).catch(function(a){c(a)})},u=function(a,b,c){var d=l(),e=(0,f.Z)(d,2),g=e[0],h=e[1];return h.headers.Prefer="resolution=merge-duplicates,return=representation",j().post("".concat(g,"/rest/v1/cronicas?select=*,master(*)"),a,h).then(function(a){b(a.data)}).catch(function(a){c(a)})},v=(d=(0,e.Z)(h().mark(function a(b,c,d){var e,f,g;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q.from("cronicas").select("id,nombre,links,masters(id,nickname),jugadores(id,nickname,personaje)").eq("id",b).single();case 2:f=(e=a.sent).data,g=e.error,g&&d(g),c(f);case 7:case"end":return a.stop()}},a)})),function(a,b,c){return d.apply(this,arguments)})},7709:function(a,b,c){"use strict";c.d(b,{ZB:function(){return g},kz:function(){return e}});var d,e=(0,c(7236).oM)({name:"cronica",initialState:{cronica:{id:"",nombre:"",master:{id:"",nombre:"",nick:""},jugadores:[]}},reducers:{setCronica:function(a,b){a.cronica.id=b.payload.id,a.cronica.nombre=b.payload.nombre},setJugadores:function(a,b){a.cronica.jugadores.push(b.payload)},setMaster:function(a,b){a.cronica.master=b.payload},hydrate:function(a,b){return b.payload}}}),f=e.actions,g=(f.setCronica,f.setJugadores,f.setMaster,f.hydrate)},2429:function(a,b,c){"use strict";c.d(b,{N:function(){return j}});var d=c(7236),e=c(7709),f=c(7812),g=(0,d.oM)({name:"datos",initialState:{cronicas:[],masters:[],jugadores:[]},reducers:{setCronicas:function(a,b){a.cronicas=[].concat((0,f.Z)(a.cronicas),[b.payload])},setMasters:function(a,b){a.masters=[].concat((0,f.Z)(a.masters),[b.payload])},setJugadores:function(a,b){a.jugadores=[].concat((0,f.Z)(a.jugadores),[b.payload])}}}),h=g.actions;h.setCronicas,h.setJugadores,h.setMasters;var i=c(9569),j=(0,d.xC)({reducer:(0,i.UY)({cronica:e.kz.reducer,datos:g.reducer})})},5557:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(8628)}])}},function(a){a.O(0,[810,47,774,888,179],function(){var b;return a(a.s=5557)}),_N_E=a.O()}])