(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[969],{1433:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return U}});var d,e,f=c(1163),g=c(2429),h=c(9473),j=c(7812),k=c(9499),l=c(6273),m=c(7294),n=c(186),o=(0,c(9367).ZP)("http://localhost:5000"),p=c(5893),q=function(){var a=(0,m.useState)(""),b=a[0],c=a[1],d=(0,m.useState)("v5"),e=d[0],f=d[1],g=(0,m.useState)(10),h=g[0],j=g[1],k=(0,m.useState)(""),l=k[0],n=k[1],q=(0,m.useState)(""),x=q[0],y=q[1],z=function(a){c(a.target.value)},A=function(a){var b=a.target.value;f(b),j({v5:10,d10:10,d2:2,d3:3,d4:4,d5:5,d6:6,d7:7,d8:8,d9:9}[b])},B=function(a){n(a.target.value)},C=function(a){y(a.target.value)},D=function(){o.emit("dados",{cantidad:parseInt(b),caras:parseInt(h),hambre:parseInt(l),dificultad:parseInt(x)}),o.on("lanzando",function(a){a.idJugador,a.lanzando||(c(""),f("v5"),j(10),n(""),y(""))})};return(0,p.jsxs)(t,{children:[(0,p.jsx)(u,{children:"Pool de dados"}),(0,p.jsxs)("div",{children:[(0,p.jsx)(v,{type:"number",onChange:z,value:b}),(0,p.jsxs)(w,{onChange:A,value:e,children:[(0,p.jsx)("option",{value:"v5",children:"V5"}),(0,p.jsx)("option",{value:"d10",children:"D10"}),(0,p.jsx)("option",{value:"d6",children:"D6"}),(0,p.jsx)("option",{value:"d2",children:"D2"}),(0,p.jsx)("option",{value:"d3",children:"D3"}),(0,p.jsx)("option",{value:"d4",children:"D4"}),(0,p.jsx)("option",{value:"d5",children:"D5"}),(0,p.jsx)("option",{value:"d7",children:"D7"}),(0,p.jsx)("option",{value:"d8",children:"D8"}),(0,p.jsx)("option",{value:"d9",children:"D9"})]})]}),(0,p.jsx)(u,{children:"Hambre"}),(0,p.jsx)(v,{type:"number",onChange:B,value:l}),(0,p.jsx)(u,{children:"Dificultad"}),(0,p.jsxs)("div",{children:[(0,p.jsx)(v,{type:"number",onChange:C,value:x}),(0,p.jsx)(r,{onClick:D,children:"Lanzar"})]}),(0,p.jsx)(s,{children:"Si no conoces la dificultad, dejalo en blanco"})]})},r=n.default.button.withConfig({displayName:"PoolDados__DadosBoton",componentId:"sc-5qt6ms-0"})(["background-color:#8a0303;border:none;color:black;height:2rem;text-align:center;text-decoration:none;display:inline-block;font-size:1rem;margin:0 0.5rem;cursor:pointer;border-radius:0.5rem;width:4rem;"]),s=n.default.p.withConfig({displayName:"PoolDados__DadosNota",componentId:"sc-5qt6ms-1"})(["font-size:0.8rem;color:#fff;margin:0;grid-column:1 / 3;color:#8a0303;font-weight:800;text-align:center;"]),t=n.default.div.withConfig({displayName:"PoolDados__CronicaDados",componentId:"sc-5qt6ms-2"})(["display:grid;grid-template-columns:1fr 1fr;align-items:start;justify-content:center;box-shadow:0 0 0.1rem 0.1rem #8a0303;padding:1rem;border-radius:0.5rem;margin:0.5rem 1rem;background-color:#282c34;@media (max-width:768px){grid-template-columns:1fr 1.5fr;position:sticky;top:0.5rem;}"]),u=n.default.label.withConfig({displayName:"PoolDados__DadosLabel",componentId:"sc-5qt6ms-3"})(["font-size:1rem;font-weight:600;font-family:'Roboto',sans-serif;color:#8a0303;margin:0.7rem 0;margin-right:1rem;text-align:right;"]),v=n.default.input.withConfig({displayName:"PoolDados__DadosInput",componentId:"sc-5qt6ms-4"})(["font-size:1rem;font-family:'Roboto',sans-serif;background-color:#000;color:#fff;border-radius:0.5rem;padding:0.5rem 1rem;width:6rem;"]),w=n.default.select.withConfig({displayName:"PoolDados__DadosSelect",componentId:"sc-5qt6ms-5"})(["font-size:1rem;font-family:'Roboto',sans-serif;background-color:#000;color:#fff;border-radius:0.5rem;padding:0.5rem 1rem;"]),x=c(1383),y=c(186),z=y.default,A=y.keyframes,B=function(a){var b=a.resultado,c=a.hambre,d=a.lanzando;return(0,p.jsxs)(p.Fragment,{children:[c&&c.map(function(a,b){return(0,p.jsx)(C,{lanzando:d,hambre:!0,children:a},b)}),b&&b.map(function(a){return(0,p.jsx)(C,{lanzando:d,children:a},i)})]})},C=z.div(d||(d=(0,x.Z)(["\n    width: 1.5em;\n    height: 1.5em;\n    font-size: 2em;\n    background-color: ",";\n    border-radius: 15%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: white;\n    cursor: pointer;\n    animation-name: ",";\n    animation-duration: 0.5s;\n    animation-iteration-count: infinite;\n"])),function(a){return a.hambre?"red":"black"},function(a){return a.lanzando?D:"none"}),D=A(e||(e=(0,x.Z)(["\n    100% {transform: rotate(360deg)}\n"]))),E=function(a){var b,c,d,e,f,g=a.jugador,h=a.userId,j=a.diced,k=a.resultado,l={};return null!=j&&j.lanzando&&(l={hambre:Array((null==j?void 0:null===(d=j.dados)|| void 0===d?void 0:d.hambre)||0).fill("X"),resultado:Array((null==j?void 0:null===(e=j.dados)|| void 0===e?void 0:e.cantidad)-(null==j?void 0:null===(f=j.dados)|| void 0===f?void 0:f.hambre)||0).fill("X")}),(0,p.jsxs)(F,{me:g.id===h,children:[(0,p.jsxs)(G,{children:[(0,p.jsx)(H,{children:null==g?void 0:null===(b=g.personaje)|| void 0===b?void 0:b.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}),(0,p.jsx)(I,{children:null==g?void 0:null===(c=g.nickname)|| void 0===c?void 0:c.normalize("NFD").replace(/[\u0300-\u036f]/g,"")})]}),(0,p.jsx)(J,{children:null!=j&&j.lanzando&&(null==j?void 0:j.idJugador)===g.id?(0,p.jsx)(B,{resultado:l.resultado||0,hambre:l.hambre||0,lanzando:!0}):null!=j&&j.lanzando||(null==j?void 0:j.idJugador)!==g.id||(null==k?void 0:k.idJugador)!==g.id?null:(0,p.jsx)(B,{resultado:k.resultado,hambre:k.hambre,lanzando:!1})})]})},F=n.default.div.withConfig({displayName:"Personaje__PersonajeContainer",componentId:"sc-x3m1a9-0"})(["display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;width:48vw;height:27vh;margin:0.5rem;padding:0.5rem 1rem;box-shadow:0 0 0.5rem 0.1rem ",";border-radius:0.5rem;@media (max-width:768px){width:95vw;}@media (min-width:1024px){width:32vw;}"],function(a){return a.me?"#8a0303":"#000000"}),G=n.default.div.withConfig({displayName:"Personaje__PersonajeHeader",componentId:"sc-x3m1a9-1"})(["display:flex;flex-direction:rows;justify-content:space-between;align-items:flex-end;width:100%;"]),H=n.default.h1.withConfig({displayName:"Personaje__PersonajeTitulo",componentId:"sc-x3m1a9-2"})(["font-size:2rem;font-weight:600;font-family:'Vampire','Roboto',sans-serif;color:#8a0303;margin:0.7rem 0;margin-right:1rem;;margin-bottom:0;"]),I=n.default.h2.withConfig({displayName:"Personaje__PersonajeSubtitulo",componentId:"sc-x3m1a9-3"})(["font-size:1rem;font-weight:600;font-family:'Vampire','Roboto',sans-serif;color:#8a0303;margin:0rem 0;"]),J=n.default.div.withConfig({displayName:"Personaje__PersonajeBody",componentId:"sc-x3m1a9-4"})(["font-family:'Roboto',sans-serif;display:flex;gap:0.5em;padding-top:1em;"]);function K(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function L(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?K(Object(c),!0).forEach(function(b){(0,k.Z)(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):K(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var M=function(a){var b,c,d,e,f,g,h=a.idCronica,k=(0,m.useState)(),n=k[0],r=k[1],s=function(a){var b,c=a.target.value,d=(null==v?void 0:null===(b=v.masters)|| void 0===b?void 0:b.id)===c;r(c);var e=d?v.masters:v.jugadores.find(function(a){return a.id===c});o.emit("conectado",L(L({},e),{},{idCronica:h,master:d,personaje:d?"Narrador":e.personaje}))},t=(0,m.useState)(),v=t[0],x=t[1];(0,m.useEffect)(function(){h&&(0,l.jo)(h,function(a){x(a),o.emit("cronica",a)},function(a){console.log({error:a})})},[h]);var y=(0,m.useState)([]),z=y[0],A=y[1];o.on("newPlayer",function(a){var b=z.map(function(b){return a.map(function(a){return a.id===b.id?a:b})});A([].concat((0,j.Z)(b),(0,j.Z)(a)).filter(function(a){return a.idCronica===h}).sort(function(a,b){return a.personaje<b.personaje?-1:1}).sort(function(a,b){return a.master?-1:1}))});var B=(0,m.useState)(),C=B[0],D=B[1];o.on("lanzando",function(a){D(a)});var F=(0,m.useState)(),G=F[0],H=F[1];return o.on("dados",function(a){H(a)}),(0,p.jsxs)(O,{children:[v&&(0,p.jsxs)(N,{children:[(0,p.jsx)(Q,{children:((null==v?void 0:v.nombre)||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"")}),(0,p.jsxs)(R,{children:["(By ",((null==v?void 0:null===(b=v.masters)|| void 0===b?void 0:b.nickname)||"").normalize("NFD").replace(/[\u0300-\u036f]/g,""),")"]})]}),n&&(null==z?void 0:z.length)>0?(0,p.jsxs)(P,{children:[(0,p.jsx)(q,{}),z.map(function(a,b){return(0,p.jsx)(E,{jugador:a,userId:n,diced:C,resultado:G},b)})]}):(0,p.jsxs)(P,{children:[(0,p.jsx)(u,{children:"Para poder jugar, debes indicarme qui\xe9n eres"}),(0,p.jsxs)(w,{onChange:s,children:[(0,p.jsx)("option",{value:"",children:"Selecciona"}),(null==v?void 0:v.masters)&&(0,p.jsx)("option",{value:null==v?void 0:null===(c=v.masters)|| void 0===c?void 0:c.id,children:null==v?void 0:null===(d=v.masters)|| void 0===d?void 0:d.nickname}),null==v?void 0:null===(e=v.jugadores)|| void 0===e?void 0:e.map(function(a,b){return(0,p.jsx)("option",{value:a.id,name:a.nickname,children:a.nickname},b)})]})]}),v&&(0,p.jsxs)(S,{children:[(null==v?void 0:v.links)&&(null==v?void 0:null===(f=v.links)|| void 0===f?void 0:f.length)>0&&(0,p.jsx)(T,{children:"Links:"}),(null==v?void 0:v.links)&&(null==v?void 0:null===(g=v.links)|| void 0===g?void 0:g.map(function(a,b){var c=a.link,d=a.nombre;return(0,p.jsxs)("a",{href:c,target:"_blank",rel:"noreferrer",children:[" \xb7 ",d]},b)}))]})]})},N=n.default.div.withConfig({displayName:"Cronica__CronicaHeader",componentId:"sc-1rlj3gn-0"})(["display:flex;flex-direction:rows;align-items:flex-end;margin-bottom:0rem;"]),O=n.default.div.withConfig({displayName:"Cronica__CronicaContainer",componentId:"sc-1rlj3gn-1"})(["display:flex;justify-content:center;flex-direction:column;align-items:flex-start;"]),P=n.default.div.withConfig({displayName:"Cronica__CronicaBody",componentId:"sc-1rlj3gn-2"})(["display:grid;grid-template-columns:1fr 1fr;@media (max-width:768px){grid-template-columns:1fr;}@media (min-width:1024px){grid-template-columns:1fr 1fr 1fr;}"]),Q=n.default.h1.withConfig({displayName:"Cronica__CronicaTitulo",componentId:"sc-1rlj3gn-3"})(["font-size:2rem;font-weight:600;font-family:'Vampire','Roboto',sans-serif;color:#8a0303;margin:0.7rem 0.5rem;margin-right:1rem;;margin-bottom:0;"]),R=n.default.h2.withConfig({displayName:"Cronica__CronicaSubtitulo",componentId:"sc-1rlj3gn-4"})(["font-size:1rem;font-weight:600;font-family:'Vampire','Roboto',sans-serif;color:#8a0303;margin:0rem 0;"]),S=n.default.div.withConfig({displayName:"Cronica__CronicaFooter",componentId:"sc-1rlj3gn-5"})(["position:fixed;bottom:0;left:0;display:grid;padding:0 0.5rem;grid-template-columns:1fr 1fr 1fr 1fr 1fr 1fr;background-color:#282c30;width:100%;"]),T=n.default.div.withConfig({displayName:"Cronica__Links",componentId:"sc-1rlj3gn-6"})(["grid-column-start:1;grid-column-end:7;"]),U=function(a){a.cronica;var b=(0,f.useRouter)().query.cronicaId;return(0,p.jsx)(h.zt,{store:g.N,children:(0,p.jsx)(M,{idCronica:b})})}},6273:function(a,b,c){"use strict";c.d(b,{Ho:function(){return v},"N$":function(){return s},Ok:function(){return u},gC:function(){return t},jo:function(){return w}});var d,e=c(29),f=c(6835),g=c(7794),h=c.n(g),j=c(9669),k=c.n(j),l=c(218),m=function(){var a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxseXJsbHB3cXNjZXVncXpwb2VlIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY1OTk4ODYxMiwiZXhwIjoxOTc1NTY0NjEyfQ.djPCjjYiMJetB0LrQn2dOZ12k794Vqw3jUjFIBNN2p4";return["https://llyrllpwqsceugqzpoee.supabase.co",{headers:{apikey:a,Authorization:"Bearer ".concat(a)}},a]},n=m(),o=(0,f.Z)(n,3),p=o[0],q=(o[1],o[2]),r=(0,l.eI)(p,q),s=function(a,b){var c=m(),d=(0,f.Z)(c,2),e=d[0],g=d[1];return k().get("".concat(e,"/rest/v1/masters?select=id,nombre,nickname,email"),g).then(function(b){a(b.data)}).catch(function(a){b(a)})},t=function(a,b,c){var d=m(),e=(0,f.Z)(d,2),g=e[0],h=e[1],j="".concat(g,"/rest/v1/cronicas?select=*,master(*)");return a&&(j="".concat(j,"&master=eq.").concat(a)),k().get("".concat(j),h).then(function(a){b(a.data)}).catch(function(a){c(a)})},u=function(a,b,c){var d=m(),e=(0,f.Z)(d,2),g=e[0],h=e[1];return h.headers.Prefer="resolution=merge-duplicates,return=representation",k().post("".concat(g,"/rest/v1/masters?select=id,nombre,nickname,email"),a,h).then(function(a){b(a.data)}).catch(function(a){c(a)})},v=function(a,b,c){var d=m(),e=(0,f.Z)(d,2),g=e[0],h=e[1];return h.headers.Prefer="resolution=merge-duplicates,return=representation",k().post("".concat(g,"/rest/v1/cronicas?select=*,master(*)"),a,h).then(function(a){b(a.data)}).catch(function(a){c(a)})},w=(d=(0,e.Z)(h().mark(function a(b,c,d){var e,f,g;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.from("cronicas").select("id,nombre,links,masters(id,nickname),jugadores(id,nickname,personaje)").eq("id",b).single();case 2:f=(e=a.sent).data,g=e.error,g&&d(g),c(f);case 7:case"end":return a.stop()}},a)})),function(a,b,c){return d.apply(this,arguments)})},7709:function(a,b,c){"use strict";c.d(b,{ZB:function(){return g},kz:function(){return e}});var d,e=(0,c(7236).oM)({name:"cronica",initialState:{cronica:{id:"",nombre:"",master:{id:"",nombre:"",nick:""},jugadores:[]}},reducers:{setCronica:function(a,b){a.cronica.id=b.payload.id,a.cronica.nombre=b.payload.nombre},setJugadores:function(a,b){a.cronica.jugadores.push(b.payload)},setMaster:function(a,b){a.cronica.master=b.payload},hydrate:function(a,b){return b.payload}}}),f=e.actions,g=(f.setCronica,f.setJugadores,f.setMaster,f.hydrate)},2429:function(a,b,c){"use strict";c.d(b,{N:function(){return k}});var d=c(7236),e=c(7709),f=c(7812),g=(0,d.oM)({name:"datos",initialState:{cronicas:[],masters:[],jugadores:[]},reducers:{setCronicas:function(a,b){a.cronicas=[].concat((0,f.Z)(a.cronicas),[b.payload])},setMasters:function(a,b){a.masters=[].concat((0,f.Z)(a.masters),[b.payload])},setJugadores:function(a,b){a.jugadores=[].concat((0,f.Z)(a.jugadores),[b.payload])}}}),h=g.actions;h.setCronicas,h.setJugadores,h.setMasters;var j=c(9569),k=(0,d.xC)({reducer:(0,j.UY)({cronica:e.kz.reducer,datos:g.reducer})})},4554:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[idCronica]",function(){return c(1433)}])}},function(a){a.O(0,[810,119,774,888,179],function(){var b;return a(a.s=4554)}),_N_E=a.O()}])